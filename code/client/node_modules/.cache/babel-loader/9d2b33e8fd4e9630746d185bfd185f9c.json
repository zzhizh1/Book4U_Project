{"ast":null,"code":"var _jsxFileName = \"/Users/miabb/Desktop/Project550/client/src/components/Search.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"../style/Dashboard.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport PageNavbar from \"./PageNavbar\";\nimport Logo from \"../assets/images/book.png\";\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props); // The state maintained by this React Component.\n\n    this.Search = () => {\n      if (!this.state.bookName) return;\n      var inputBook = this.state.bookName;\n      fetch(`http://localhost:8081/${inputBook}`, {\n        method: \"GET\"\n      }).then(res => res.json()).then(searchList => {\n        if (searchList && searchList.length > 0) {\n          this.setState({\n            books: searchList\n          });\n        } else {\n          this.setState({\n            placeholder: inputBook\n          });\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.state = {\n      bookName: \"\",\n      books: [],\n      placeholder: \"\"\n    };\n    this.goToSubpage = this.goToSubpage.bind(this);\n  }\n\n  componentDidMount() {\n    const keyword = window.location.search.split(\"k=\");\n    this.setState({\n      bookName: decodeURI(keyword[1]) || \"\"\n    }, () => {\n      this.Search();\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      bookName: e.target.value\n    });\n  } // Search\n\n\n  // Go to the book's subpage/info page\n  goToSubpage(ISBN) {\n    this.props.history.push({\n      pathname: '/subpage',\n      state: {\n        //ISBN: the ISBN of the book that user just clicked\n        ISBN: ISBN\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(PageNavbar, {\n      active: \"dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container movies-container mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img\",\n      id: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: Logo,\n      className: \"logo-img\",\n      id: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-5\",\n      id: \"searchbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"searchbar\",\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Enter title, author, publisher,...\",\n      \"aria-describedby\": \"button-addon2\",\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn bg-light text-black\",\n      type: \"button\",\n      id: \"button-addon2\",\n      onClick: () => {\n        window.location.href = `/search?k=${this.state.bookName}`;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, \"Search\")))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list pr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-box px-3 pt-3\",\n      id: \"dash\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"list-title mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, \"\\u2261 Resulting Books\"), this.state.books.length > 0 ? this.state.books.map((element, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-row pt-2\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-col cover-col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"cover\",\n        src: element.image_url_l,\n        onClick: () => this.goToSubpage(element.ISBN),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-col content-col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 27\n        }\n      }, element.title), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-black-50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 27\n        }\n      }, element.author)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-col rating-col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 27\n        }\n      }, element.rating)));\n    }) : /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        textAlign: \"center\",\n        margin: \"100px 0\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, \"Sorry, there's no result for \\\"\", this.state.placeholder, \"\\\".\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(Search);","map":{"version":3,"sources":["/Users/miabb/Desktop/Project550/client/src/components/Search.js"],"names":["React","withRouter","PageNavbar","Logo","Search","Component","constructor","props","state","bookName","inputBook","fetch","method","then","res","json","searchList","length","setState","books","placeholder","catch","err","console","log","goToSubpage","bind","componentDidMount","keyword","window","location","search","split","decodeURI","handleChange","e","target","value","ISBN","history","push","pathname","render","href","map","element","index","image_url_l","title","author","rating","textAlign","margin"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"../style/Dashboard.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport PageNavbar from \"./PageNavbar\";\nimport Logo from \"../assets/images/book.png\";\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n    // The state maintained by this React Component.\n    this.state = {\n      bookName: \"\",\n      books: [],\n      placeholder: \"\",\n    };\n\n    this.goToSubpage = this.goToSubpage.bind(this);\n  }\n\n  componentDidMount() {\n    const keyword = window.location.search.split(\"k=\");\n    this.setState(\n      {\n        bookName: decodeURI(keyword[1]) || \"\",\n      },\n      () => {\n        this.Search();\n      }\n    );\n  }\n\n  handleChange(e) {\n    this.setState({\n      bookName: e.target.value,\n    });\n  }\n\n  // Search\n  Search = () => {\n    if (!this.state.bookName) return;\n    var inputBook = this.state.bookName;\n    fetch(`http://localhost:8081/${inputBook}`, { \n      method: \"GET\",\n    })\n      .then((res) => res.json())\n      .then((searchList) => {\n        if (searchList && searchList.length > 0) {\n          this.setState({\n            books: searchList,\n          });\n        } else {\n          this.setState({\n            placeholder: inputBook,\n          });\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  // Go to the book's subpage/info page\n  goToSubpage(ISBN) {\n    this.props.history.push({\n      pathname : '/subpage',\n      state :{\n        //ISBN: the ISBN of the book that user just clicked\n        ISBN:ISBN\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"Dashboard\">\n        <PageNavbar active=\"dashboard\" />\n\n        <br></br>\n        <div className=\"container movies-container mt-5\">\n          {/* Search */}\n          <div className=\"search\">\n          <div className=\"img\" id=\"logo\">\n            <img src={Logo} className=\"logo-img\" id=\"img\"/>\n          </div>\n            <div className=\"input-group mb-5\" id=\"searchbar\">\n              <input\n                id=\"searchbar\"\n                type=\"text\"\n                className=\"form-control\"\n                placeholder=\"Enter title, author, publisher,...\"\n                aria-describedby=\"button-addon2\"\n                onChange={(e) => this.handleChange(e)}\n              />\n              <div className=\"input-group-append\">\n                <button\n                  className=\"btn bg-light text-black\"\n                  type=\"button\"\n                  id=\"button-addon2\"\n                  onClick={()=>{window.location.href=`/search?k=${this.state.bookName}`}}\n                >\n                  Search\n                </button>\n              </div>\n            </div>\n          </div>\n\n            \n          <br></br>\n          {/* column */}\n          <div className=\"list-wrap\">\n            <div className=\"list pr-1\">\n              <div className=\"list-box px-3 pt-3\" id= \"dash\">\n                <h5 className=\"list-title mb-3\">≡ Resulting Books</h5>\n\n                {this.state.books.length > 0 ? (\n                  this.state.books.map((element, index) => {\n                    return (\n                      <div className=\"list-row pt-2\" key={index}>\n                        <div className=\"list-col cover-col\">\n                          <img className=\"cover\" src={element.image_url_l} onClick={()=>this.goToSubpage(element.ISBN)}/>\n                        </div>\n                        <div className=\"list-col content-col\">\n                          <h5>{element.title}</h5>\n                          <p className=\"text-black-50\">{element.author}</p>\n                        </div>\n                        <div className=\"list-col rating-col\">\n                          <h5>{element.rating}</h5>\n                        </div>\n                      </div>\n                    );\n                  })\n                ) : (\n                  <h4 style={{ textAlign: \"center\", margin: \"100px 0\" }}>\n                    Sorry, there's no result for \"{this.state.placeholder}\".\n                  </h4>\n                )}\n              </div>\n            </div>\n\n          </div>\n          <div className=\"footer mt-5\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Search);\n"]},"metadata":{},"sourceType":"module"}